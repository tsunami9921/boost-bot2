<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Roblox Profil Arama</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>.hidden{display:none;}</style>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center min-h-screen p-6">
  <h1 class="text-3xl font-bold mb-6">Roblox Profil Arama</h1>

  <div class="flex gap-2 mb-6">
    <input id="username" type="text" placeholder="Kullanƒ±cƒ± adƒ±" class="p-2 rounded text-black w-64"/>
    <button onclick="searchUser()" class="bg-blue-600 px-4 py-2 rounded hover:bg-blue-700">Ara</button>
  </div>

  <div id="result" class="text-center hidden">
    <div class="bg-gray-800 p-6 rounded shadow-lg">
      <img id="avatar" class="mx-auto w-32 h-32 rounded-full mb-4"/>
      <h2 id="displayName" class="text-xl font-bold"></h2>
      <p id="usernameShow" class="text-gray-300"></p>
      <p id="userId" class="text-sm"></p>
      <a id="profileLink" target="_blank" class="text-blue-400 underline block mt-2">Profili A√ß</a>
    </div>
  </div>

  <p id="errorMsg" class="text-red-500 mt-4 hidden"></p>

  <script>
    async function searchUser(){
      const name = document.getElementById("username").value.trim();
      const resEl = document.getElementById("result");
      const errEl = document.getElementById("errorMsg");

      if(!name){
        errEl.textContent = "‚ö†Ô∏è Kullanƒ±cƒ± adƒ± bo≈ü.";
        errEl.classList.remove("hidden");
        resEl.classList.add("hidden");
        return;
      }

      errEl.classList.add("hidden");
      resEl.classList.add("hidden");

      errEl.textContent = "‚è≥ Y√ºkleniyor...";
      errEl.classList.remove("hidden");

      try {
        const api = "https://users.roblox.com/v1/usernames/users";
        const proxy = "https://cors-anywhere.herokuapp.com/";
        const body = JSON.stringify({usernames:[name]});

        const r1 = await fetch(proxy + api, { method:"POST", headers:{"Content-Type":"application/json"}, body });
        const j1 = await r1.json();
        const user = j1.data?.[0];
        if(!user) throw new Error("Kullanƒ±cƒ± yok.");

        const thumbApi = `https://thumbnails.roblox.com/v1/users/avatar?userIds=${user.id}&size=420x420&format=Png&isCircular=true`;
        const r2 = await fetch(proxy + thumbApi);
        const img = (await r2.json()).data?.[0]?.imageUrl;

        document.getElementById("avatar").src = img;
        document.getElementById("displayName").textContent = user.displayName;
        document.getElementById("usernameShow").textContent = "@"+user.username;
        document.getElementById("userId").textContent = "ID: "+user.id;
        document.getElementById("profileLink").href = `https://www.roblox.com/users/${user.id}/profile`;

        errEl.classList.add("hidden");
        resEl.classList.remove("hidden");
      } catch(err){
        errEl.textContent = "üö´ " + err.message;
        resEl.classList.add("hidden");
      }
    }
  </script>
</body>
</html>
